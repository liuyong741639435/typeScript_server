<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ts项目</title>
</head>
<body>
  <input id="file" type='file' name= ''>
</body>
<script>
  function uploadFile() {
    var fileObj = document.getElementById('file').files[0]
    var url = 'http://localhost:3000/api/file_upload'
    var form = new FormData()
    form.append('file', fileObj)
    var xhr = new XMLHttpRequest()
    xhr.open('post',url,true)
    xhr.onload =uploadComplete
    xhr.upload.onloadstart = function(){
      ot = new Date().getTime()
      oloaded = 0
    }
    xhr.send(form)
  }
  function uploadComplete(event){
    if(event.target.responseText === 'success') {
      console.log(`200 success`)
    } else {
      console.log(`faild`)
    }
  }
  // function uploadFailed() {
  //   console.log('faild')
  // }
  document.getElementById('file').addEventListener('change',uploadFile)
</script>
</html>